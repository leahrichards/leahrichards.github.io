YUI.add("hermes-lang-pika-day",function(e,t){e.Intl.add("hermes/pika-day","en-US",{DATE_FORMAT:["MM-DD-YYYY"],PREVIOUS_MONTH:["Previous Month"],NEXT_MONTH:["Next Month"],JANUARY:["January"],FEBRUARY:["February"],MARCH:["March"],APRIL:["April"],MAY:["May"],JUNE:["June"],JULY:["July"],AUGUST:["August"],SEPTEMBER:["September"],OCTOBER:["October"],NOVEMBER:["November"],DECEMBER:["December"],SUNDAY:["Sunday"],MONDAY:["Monday"],TUESDAY:["Tuesday"],WEDNESDAY:["Wednesday"],THURSDAY:["Thursday"],FRIDAY:["Friday"],SATURDAY:["Saturday"],SUNDAY_SHORT:["S"],MONDAY_SHORT:["M"],TUESDAY_SHORT:["T"],WEDNESDAY_SHORT:["W"],THURSDAY_SHORT:["T"],FRIDAY_SHORT:["F"],SATURDAY_SHORT:["S"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-search-slender-advanced-panel",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'	<div class="advanced-panel">\n\n		<div class="fluid-centered">\n			<div class="quick-filter">\n\n				'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-color-picker-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n				"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-style-picker-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n				<div class="advanced-toggle">\n					<a class=\'tertiary\' title="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"search.TOGGLE_ADVANCED"},data:i}))+'" href="#" data-track="search-toggle-advanced" aria-haspopup="true" aria-expanded="false">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"search.ADVANCED"},data:i}))+'<span class="advanced-icon'+((s=n["if"].call(o,t!=null?t.collapseAdvancedOptions:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></span></a>\n				</div>\n\n			</div>\n		</div>\n\n		<div class="advanced-options fluid-centered'+((s=n["if"].call(o,t!=null?t.collapseAdvancedOptions:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n\n			'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-orientation-picker-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n			"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-min-size-picker-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n			"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-date-picker-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n			"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-content-picker-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n			"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["search-search-in-picker-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n		</div>\n\n	</div>\n"},2:function(e,t,n,r,i){return" collapsed"},4:function(e,t,n,r,i){var s,o=t!=null?t:{};return'			<div class="inactive-groups-toggle">\n				<input id="inactive-groups-toggle-checkbox" type="checkbox"'+((s=n["if"].call(o,t!=null?t.isInactiveGroupsToggleChecked:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+' />\n				<label for="inactive-groups-toggle-checkbox">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(o,{name:"intlHTMLMessage",hash:{intlName:"search.HIDE_INACTIVE_GROUPS"},data:i}))+"</label>\n			</div>\n"},5:function(e,t,n,r,i){return" checked"},7:function(e,t,n,r,i){return"			"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["search-sort-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},9:function(e,t,n,r,i){var s;return'			<div class="layout-toggles">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.showTilesButton:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.program(13,i,0),data:i}))!=null?s:"")+"			</div>\n"},10:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'					<button data-layout-style="'+l((o=(o=n.thumbsLayoutButtonData||(t!=null?t.thumbsLayoutButtonData:t))!=null?o:a,typeof o===f?o.call(u,{name:"thumbsLayoutButtonData",hash:{},data:i}):o))+'" class="layout thumbs'+((s=n["if"].call(u,t!=null?t.isThumbsLayout:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-track="search-layout-thumbs" title="'+l((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"search.THUMBNAIL_VIEW"},data:i}))+'"></button>\n					<button data-layout-style="'+l((o=(o=n.justifiedLayoutButtonData||(t!=null?t.justifiedLayoutButtonData:t))!=null?o:a,typeof o===f?o.call(u,{name:"justifiedLayoutButtonData",hash:{},data:i}):o))+'" class="layout justified'+((s=n["if"].call(u,t!=null?t.isJustifiedLayout:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-track="search-layout-justified" title="'+l((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"search.JUSTIFIED_VIEW"},data:i}))+'"></button>\n					<button data-layout-style="'+l((o=(o=n.tilesLayoutButtonData||(t!=null?t.tilesLayoutButtonData:t))!=null?o:a,typeof o===f?o.call(u,{name:"tilesLayoutButtonData",hash:{},data:i}):o))+'" class="layout tiles'+((s=n["if"].call(u,t!=null?t.isTilesLayout:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-track="search-layout-tiles" title="'+l((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"search.TILE_VIEW"},data:i}))+'"></button>\n'},11:function(e,t,n,r,i){return" selected"},13:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'					<button data-layout-style="'+l((o=(o=n.justifiedLayoutButtonData||(t!=null?t.justifiedLayoutButtonData:t))!=null?o:a,typeof o===f?o.call(u,{name:"justifiedLayoutButtonData",hash:{},data:i}):o))+'" class="layout justified'+((s=n["if"].call(u,t!=null?t.isJustifiedLayout:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-track="search-layout-justified" title="'+l((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"search.JUSTIFIED_VIEW"},data:i}))+'"></button>\n					<button data-layout-style="'+l((o=(o=n.thumbsLayoutButtonData||(t!=null?t.thumbsLayoutButtonData:t))!=null?o:a,typeof o===f?o.call(u,{name:"thumbsLayoutButtonData",hash:{},data:i}):o))+'" class="layout thumbs'+((s=n["if"].call(u,t!=null?t.isThumbsLayout:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-track="search-layout-thumbs" title="'+l((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"search.THUMBNAIL_VIEW"},data:i}))+'"></button>\n'},15:function(e,t,n,r,i){return'		<div class="filters">\n			'+e.escapeExpression
((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["search-filter-tools-view"]:t,{name:"outlet",hash:{},data:i}))+"\n		</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n.unless.call(o,t!=null?t.showToolbarOnly:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n<div class="tool-bar fluid-centered">\n\n	<div class="tools">\n'+((s=n["if"].call(o,t!=null?t.showInactiveGroupsToggle:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(o,t!=null?t["search-camera-settings-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(o,t!=null?t.showSortMenu:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.showLayoutToggles:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n\n"+((s=n["if"].call(o,t!=null?t.showFilterMenus:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-slender-advanced-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("search-slender-advanced-panel-view",function(e){var t=300,n="search-advanced-panel-state";e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n=t.modelParams&&t.modelParams.apiParams?e.merge(t.modelParams.apiParams):{};return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.searchUrl=new e.SearchUrl(n,this.appContext,t.searchType),t.searchUrl=this.searchUrl,this.set("areAdvancedOptionsVisible",this.getStoredAdvancedOptionsState()||t.openAdvanced),this.set("showToolbarOnly",t.showToolbarOnly),this.set("showFilterMenus",t.showTools),this.set("showInactiveGroupToggle",t.showInactiveToggle),this.set("showSortMenu",t.showSort),this.set("showLayoutToggles",t.showTools),this.set("showInactiveGroupsToggle",t.showInactiveToggle),this.set("isInactiveGroupsToggleChecked",this.searchUrl.getAPIParam(e.SearchHelper.GROUPS_SEARCH_API.filterInactive)!=="0"),this.set("layoutStyle",t.viewType||e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.justified),this},subviewConfig:{"search-filter-tools-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-sort-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-color-picker-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"search-style-picker-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"search-orientation-picker-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-min-size-picker-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-date-picker-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-search-in-picker-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-content-picker-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-camera-settings-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.flipper.isFlipped("enable-exposure-search")}}},loadState:function(){var t=this,n=[];return this.appContext.getViewer().signedIn&&n.push(this.appContext.getModel("person-preferences-models",this.appContext.getViewer().nsid).then(function(e){t.set("viewerPrefsModel",e)})),e.Promise.all(n)},buildContainer:function(){return this.setContainerWithTemplate("search-slender-advanced-panel",{collapseAdvancedOptions:!this.get("areAdvancedOptionsVisible"),showToolbarOnly:this.get("showToolbarOnly"),showFilterMenus:this.get("showFilterMenus"),showInactiveGroupToggle:this.get("showInactiveGroupToggle"),showSortMenu:this.get("showSortMenu"),showLayoutToggles:this.get("showLayoutToggles"),showInactiveGroupsToggle:this.get("showInactiveGroupsToggle"),showTilesButton:this.appContext.flipper.isFlipped("search-tiles"),isInactiveGroupsToggleChecked:this.get("isInactiveGroupsToggleChecked"),justifiedLayoutButtonData:e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.justified,thumbsLayoutButtonData:e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.thumbs,tilesLayoutButtonData:e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.tiles,isJustifiedLayout:this.get("layoutStyle")===e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.justified,isThumbsLayout:this.get("layoutStyle")===e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.thumbs,isTilesLayout:this.get("layoutStyle")===e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.tiles}),this},activate:function(){var e=this.get("container");return this.get("showToolbarOnly")||this.registerEventHandler(e.one(".advanced-toggle").on("click",this.handleAdvancedToggleClick.bind(this))),this.get("showLayoutToggles")&&this.registerEventHandler(e.delegate("click",this.handleLayoutToggleClick.bind(this),".layout")),this.get("showInactiveGroupsToggle")&&this.registerEventHandler(e.one("#inactive-groups-toggle-checkbox").on("change",this.handleInactiveGroupsToggleChange.bind(this))),this.registerEventHandler(e.delegate("mouseenter",this.handleTooltipElemMouseEnter.bind(this),"[data-tooltip-title]")),this.registerEventHandler(e.delegate("mouseleave",this.handleTooltipElemMouseLeave.bind(this),"[data-tooltip-title]")),e.setAttribute("role","toolbar"),this.setupAccessibilityAttributes(),this},setupAccessibilityAttributes:function(){var e=this.get("container"),t=e.all(".tabbable"),n=e.one(".advanced-toggle .tertiary");this.get("areAdvancedOptionsVisible")?(t.setAttribute("tabindex","0"),t.setAttribute("aria-hidden","false"),n&&n.setAttribute("aria-expanded","true")):(t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true"),n&&n.setAttribute("aria-expanded","false"))},onSubviewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"search:urlUpdate":t[1]&&(this.searchUrl=t[1],this.fire("subviewViewEvent","search:dirty"),this.appContext.flapp.navigate(this.searchUrl.getURL()));break;case"search:blackandwhiteStyleSelected":case"search:colorSelected":this.fire("parentViewEvent",n)}},handleLayoutToggleClick:function(e){var t=this.get("container"),n,r;e.preventDefault(),n=e.target.getData("layout-style"),n!==this.get("layoutStyle")&&(r=t.one(".layout.selected"),r&&r.removeClass("selected"),e.target.addClass("selected"),this.set("layoutStyle",n),this.get("viewerPrefsModel")&&(this.get("viewerPrefsModel").setValue("unifiedSearchViewPref",this.get("layoutStyle")),this.get("viewerPrefsModel").remoteUpdate()),this.fire("subviewViewEvent","search:layoutChange",this.get("layoutStyle")))},handleAdvancedToggleClick:function(t){var n=this.get("container"),r=n.one(".advanced-options"),i=this;t.preventDefault(),n.one(".advanced-icon").toggleClass("collapsed"),r.toggleClass("collapsed"),this.set("areAdvancedOptionsVisible",!this.get("areAdvancedOptionsVisible")),this.storeAdvancedOptionsState(this.get("areAdvancedOptionsVisible")),this.setupAccessibilityAttributes(),this.fire("subviewViewEvent","search:startAdvancedPanelTransition",this.get("areAdvancedOptionsVisible")),e.flutil.onTransitionEnd(r,function(
){i.fire("subviewViewEvent","search:finishAdvancedPanelTransition",i.get("areAdvancedOptionsVisible"))})},handleInactiveGroupsToggleChange:function(t){t.halt(),t.target.get("checked")?this.searchUrl.removeAPIParam(e.SearchHelper.GROUPS_SEARCH_API.filterInactive):this.searchUrl.setAPIParam(e.SearchHelper.GROUPS_SEARCH_API.filterInactive,"0"),this.appContext.flapp.navigate(this.searchUrl.getURL())},handleTooltipElemMouseEnter:function(n){var r=n.target.getData("tooltip-title"),i=this;n.halt(),this.tooltipDroparound&&this.tooltipDroparound.close(),clearTimeout(this.tooltipHoverTimer),this.isHovering=!0,this.tooltipHoverTimer=setTimeout(function(){i.isHovering&&(i.tooltipDroparound=new e.Views.FluidDroparound({appContext:i.appContext,showDropArrow:!0,dismissOnOverlayClick:!1,dismissOnActionClick:!1,observePageResize:!0,anchorElement:n.target,positionFixed:!0,closeOnScroll:!0,hideModalOverlay:!0,invisibleOverlay:!0,autoSizeToContent:!0,useAnchorOffsetSize:!0,horizCenterToAnchor:!0,preferBottom:n.target.getData("tooltip-prefer-bottom"),classList:"advanced-panel-tooltip",textMessage:r}),i.tooltipDroparound.show())},t)},handleTooltipElemMouseLeave:function(e){e.halt(),this.isHovering=!1,this.tooltipDroparound&&this.tooltipDroparound.close()},getStoredAdvancedOptionsState:function(){var t;return YUI.Env.isServer||(e.SearchUrl.isSearchUrl(this.appContext.getPreviousURL())?t=e.AttributeHelpers.coerceBoolean(e.StorageHelper.getItem(n,!0)):e.StorageHelper.remove(n,!0)),t||!1},storeAdvancedOptionsState:function(t){YUI.Env.isServer||e.StorageHelper.setItem(n,t,!0)},beforeDestroy:function(){this.detachRegisteredEvents(),clearTimeout(this.tooltipHoverTimer),this.isHovering=!1,this.tooltipDroparound&&this.tooltipDroparound.close()}})},"@VERSION@",{requires:["flickr-view","flickr-promise","search-filter-tools-view","search-sort-menu-view","search-color-picker-view","search-style-picker-view","search-orientation-picker-view","search-min-size-picker-view","search-content-picker-view","search-search-in-picker-view","search-date-picker-view","hermes-template-search-slender-advanced-panel","attribute-helpers","storage-helper","flutil","person-preferences-models"],optionalRequires:["pika-day"],langBundles:["search","pika-day","common"]});
YUI.add("pika-day",function(e,t){typeof window!="undefined"&&(this.moment=window.moment),
/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
function(e,t){"use strict";var n;if(typeof exports=="object"){try{n=require("moment")}catch(r){}module.exports=t(n)}else typeof define=="function"&&define.amd?define(function(e){var r="moment";try{n=e(r)}catch(i){}return t(n)}):e.Pikaday=t(e.moment)}(this,function(e){"use strict";var t=typeof e=="function",n=!!window.addEventListener,r=window.document,i=window.setTimeout,s=function(e,t,r,i){n?e.addEventListener(t,r,!!i):e.attachEvent("on"+t,r)},o=function(e,t,r,i){n?e.removeEventListener(t,r,!!i):e.detachEvent("on"+t,r)},u=function(e,t,n){var i;r.createEvent?(i=r.createEvent("HTMLEvents"),i.initEvent(t,!0,!1),i=b(i,n),e.dispatchEvent(i)):r.createEventObject&&(i=r.createEventObject(),i=b(i,n),e.fireEvent("on"+t,i))},a=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},f=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},l=function(e,t){f(e,t)||(e.className=e.className===""?t:e.className+" "+t)},c=function(e,t){e.className=a((" "+e.className+" ").replace(" "+t+" "," "))},h=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},d=function(e){var t=e.getDay();return t===0||t===6},v=function(e){return e%4===0&&e%100!==0||e%400===0},m=function(e,t){return[31,v(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},g=function(e){p(e)&&e.setHours(0,0,0,0)},y=function(e,t){return e.getTime()===t.getTime()},b=function(e,t,n){var r,i;for(r in t){i=e[r]!==undefined;if(i&&typeof t[r]=="object"&&t[r]!==null&&t[r].nodeName===undefined)p(t[r])?n&&(e[r]=new Date(t[r].getTime())):h(t[r])?n&&(e[r]=t[r].slice(0)):e[r]=b({},t[r],n);else if(n||!i)e[r]=t[r]}return e},w=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},E={field:null,bound:undefined,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},S=function(e,t,n){t+=e.firstDay;while(t>=7)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},x=function(e,t,n,r,i,s,o){if(o)return'<td class="is-empty"></td>';var u=[];return s&&u.push("is-disabled"),i&&u.push("is-today"),r&&u.push("is-selected"),'<td data-day="'+e+'" class="'+u.join(" ")+'">'+'<button class="pika-button pika-day" type="button" '+'data-pika-year="'+n+'" data-pika-month="'+t+'" data-pika-day="'+e+'">'+e+"</button>"+"</td>"},T=function(e,t,n){var r=new Date(n,0,1),i=Math.ceil(((new Date(n,t,e)-r)/864e5+r.getDay()+1)/7);return'<td class="pika-week">'+i+"</td>"},N=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},C=function(e){return"<tbody>"+e.join("")+"</tbody>"},k=function(e){var t,n=[];e.showWeekNumber&&n.push("<th></th>");for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+S(e,t)+'">'+S(e,t,!0)+"</abbr></th>");return"<thead>"+(e.isRTL?n.reverse():n).join("")+"</thead>"},L=function(e,t,n,r,i){var s,o,u,a=e._o,f=n===a.minYear,l=n===a.maxYear,c='<div class="pika-title">',p,d,v=!0,m=!0;for(u=[],s=0;s<12;s++)u.push('<option value="'+(n===i?s-t:12+s-t)+'"'+(s===r?" selected":"")+(f&&s<a.minMonth||l&&s>a.maxMonth?"disabled":"")+">"+a.i18n.months[s]+"</option>");p='<div class="pika-label">'+a.i18n.months[r]+'<select class="pika-select pika-select-month">'+u.join("")+"</select></div>",h(a.yearRange)?(s=a.yearRange[0],o=a.yearRange[1]+1):(s=n-a.yearRange,o=1+n+a.yearRange);for(u=[];s<o&&s<=a.maxYear;s++)s>=a.minYear&&u.push('<option value="'+s+'"'+(s===n?" selected":"")+">"+s+"</option>");return d='<div class="pika-label">'+n+a.yearSuffix+'<select class="pika-select pika-select-year">'+u.join("")+"</select></div>",a.showMonthAfterYear?c+=d+p:c+=p+d,f&&(r===0||a.minMonth>=r)&&(v=!1),l&&(r===11||a.maxMonth<=r)&&(m=!1),t===0&&(c+='<button class="pika-prev'+(v?"":" is-disabled")+'" type="button">'+a.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(c+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+a.i18n.nextMonth+"</button>"),c+="</div>"},A=function(e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+k(e)+C(t)+"</table>"},O=function(o){var u=this,a=u.config(o);u._onMouseDown=function(e){if(!u._v)return;e=e||window.event;var t=e.target||e.srcElement;if(!t)return;if(!f(t,"is-disabled")){if(f(t,"pika-button")&&!f(t,"is-empty")){u.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),a.bound&&i(function(){u.hide(),a.field&&a.field.blur()},100);return}f(t,"pika-prev")?u.prevMonth():f(t,"pika-next")&&u.nextMonth()}if(!f(t,"pika-select")){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}else u._c=!0},u._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;if(!t)return;f(t,"pika-select-month")?u.gotoMonth(t.value):f(t,"pika-select-year")&&u.gotoYear(t.value)},u._onInputChange=function(n){var r;if(n.firedBy===u)return;t?(r=e(a.field.value,a.format),r=r&&r.isValid()?r.toDate():null):r=new Date(Date.parse(a.field.value)),u.setDate(p(r)?r:null),u._v||u.show()},u._onInputFocus=function(){u.show()},u._onInputClick=function(){u.show()},u._onInputBlur=function(){var e=r.activeElement;do if(f(e,"pika-single"))return;while(e=e.parentNode);u._c||(u._b=i(function(){u.hide()},50)),u._c=!1},u._onClick=
function(e){e=e||window.event;var t=e.target||e.srcElement,r=t;if(!t)return;!n&&f(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),s(t,"change",u._onChange)));do if(f(r,"pika-single")||r===a.trigger)return;while(r=r.parentNode);u._v&&t!==a.trigger&&r!==a.trigger&&u.hide()},u.el=r.createElement("div"),u.el.className="pika-single"+(a.isRTL?" is-rtl":""),s(u.el,"mousedown",u._onMouseDown,!0),s(u.el,"change",u._onChange),a.field&&(a.container?a.container.appendChild(u.el):a.bound?r.body.appendChild(u.el):a.field.parentNode.insertBefore(u.el,a.field.nextSibling),s(a.field,"change",u._onInputChange),a.defaultDate||(t&&a.field.value?a.defaultDate=e(a.field.value,a.format).toDate():a.defaultDate=new Date(Date.parse(a.field.value)),a.setDefaultDate=!0));var l=a.defaultDate;p(l)?a.setDefaultDate?u.setDate(l,!0):u.gotoDate(l):u.gotoDate(new Date),a.bound?(this.hide(),u.el.className+=" is-bound",s(a.trigger,"click",u._onInputClick),s(a.trigger,"focus",u._onInputFocus),s(a.trigger,"blur",u._onInputBlur)):this.show()};return O.prototype={config:function(e){this._o||(this._o=b({},E,!0));var t=b(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.bound=!!(t.bound!==undefined?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn=typeof t.disableDayFn=="function"?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;t.numberOfMonths=n>4?4:n,p(t.minDate)||(t.minDate=!1),p(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&(g(t.minDate),t.minYear=t.minDate.getFullYear(),t.minMonth=t.minDate.getMonth()),t.maxDate&&(g(t.maxDate),t.maxYear=t.maxDate.getFullYear(),t.maxMonth=t.maxDate.getMonth());if(h(t.yearRange)){var r=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||r,t.yearRange[1]=parseInt(t.yearRange[1],10)||r}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||E.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return p(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,r){t&&e.isMoment(n)&&this.setDate(n.toDate(),r)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",u(this._o.field,"change",{firedBy:this})),this.draw();typeof e=="string"&&(e=new Date(Date.parse(e)));if(!p(e))return;var n=this._o.minDate,r=this._o.maxDate;p(n)&&e<n?e=n:p(r)&&e>r&&(e=r),this._d=new Date(e.getTime()),g(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),u(this._o.field,"change",{firedBy:this})),!t&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},gotoDate:function(e){var t=!0;if(!p(e))return;if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=i<n.getTime()||r.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=w(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=w({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){this._o.minDate=e},setMaxDate:function(e){this._o.maxDate=e},draw:function(e){if(!this._v&&!e)return;var t=this._o,n=t.minYear,r=t.maxYear,s=t.minMonth,o=t.maxMonth,u="";this._y<=n&&(this._y=n,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=r&&(this._y=r,!isNaN(o)&&this._m>o&&(this._m=o));for(var a=0;a<t.numberOfMonths;a++)u+='<div class="pika-lendar">'+L(this,a,this.calendars[a].year,this.calendars[a].month,this.calendars[0].year)+this.render(this.calendars[a].year,this.calendars[a].month)+"</div>";this.el.innerHTML=u,t.bound&&t.field.type!=="hidden"&&i(function(){t.trigger.focus()},1);if(typeof this._o.onDraw=="function"){var f=this;i(function(){f._o.onDraw.call(f)},0)}},adjustPosition:function(){if(this._o.container)return;var e=this._o.trigger,t=e,n=this.el.offsetWidth,i=this.el.offsetHeight,s=window.innerWidth||r.documentElement.clientWidth,o=window.innerHeight||r.documentElement.clientHeight,u=window.pageYOffset||r.body.scrollTop||r.documentElement.scrollTop,a,f,l;if(typeof e.getBoundingClientRect=="function")l=e.getBoundingClientRect(),a=l.left+window.pageXOffset,f=l.bottom+window.pageYOffset;else{a=t.offsetLeft,f=t.offsetTop+t.offsetHeight;while(t=t.offsetParent)a+=t.offsetLeft,f+=t.offsetTop}if(this._o.reposition&&a+n>s||this._o.position.indexOf("right")>-1&&a-n+e.offsetWidth>0)a=a-n+e.offsetWidth;if(this._o.reposition&&f+i>o+u||this._o.position.indexOf("top")>-1&&f-i-e.offsetHeight>0)f=f-i-e.offsetHeight;this.el.style.cssText=["position: absolute","left: "+a+"px","top: "+f+"px"].join(";")},render:function(e,t){var n=this._o,r=new Date,i=m(e,t),s=(new Date(e,t,1)).getDay(),o=[],u=[];g(r),n.firstDay>0&&(s-=n.firstDay,s<0&&(s+=7));var a=i+s,f=a;while(f>7)f-=7;a+=7-f;for(var l=0,c=0;l<a;l++){var h=new Date(e,t,1+(l-s)),v=p(this._d)?y(h,this._d):!1,b=y(h,r),w=l<s||l>=i+s,E=n.minDate&&h<n.minDate||n.maxDate&&h>n.maxDate||n.disableWeekends&&d(h)||n.disableDayFn&&n.disableDayFn(h);u.push(x(1+(l-s),t,e,v,b,E,w)),++c===7&&(n.showWeekNumber&&u.unshift(T(l-s,t,e)),o.push(N(u,n.isRTL)),u=[],c=0)}return A
(n,o)},isVisible:function(){return this._v},show:function(){this._v||(c(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(s(r,"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&&(this._o.bound&&o(r,"click",this._onClick),this.el.style.cssText="",l(this.el,"is-hidden"),this._v=!1,e!==undefined&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){this.hide(),o(this.el,"mousedown",this._onMouseDown,!0),o(this.el,"change",this._onChange),this._o.field&&(o(this._o.field,"change",this._onInputChange),this._o.bound&&(o(this._o.trigger,"click",this._onInputClick),o(this._o.trigger,"focus",this._onInputFocus),o(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},O}),e.Pikaday=this.Pikaday},"@VERSION@",{affinity:"client"});
YUI.add("hermes-template-search-photos-everyone-view",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.viewAll:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:""},2:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'		<div>\n			<h5 class="search-results-header">'+((s=n.unless.call(u,t!=null?t.loading:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+e.escapeExpression((o=(o=n.photoListTitle||(t!=null?t.photoListTitle:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"photoListTitle",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</h5>\n		</div>\n"},3:function(e,t,n,r,i){return'<span class="secondary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.photoCount:t,intlName:"search.RESULTS_COUNT"},data:i}))+"</span>"},5:function(e,t,n,r,i){return' <div class="flickr-dots inline"></div>'},7:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'		<div>\n			<h5 class="search-results-header">'+((s=n.unless.call(u,t!=null?t.loading:t,{name:"unless",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+e.escapeExpression((o=(o=n.photoListTitle||(t!=null?t.photoListTitle:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"photoListTitle",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</h5>\n		</div>\n"},8:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},t!=null?t.singleResult:t,{name:"unless",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:""},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<a href="'+a((s=(s=n.viewAllLink||(t!=null?t.viewAllLink:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"viewAllLink",hash:{},data:i}):s))+'" class="view-more-link" data-track="search-viewall">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{count:t!=null?t.photoCount:t,intlName:"search.VIEW_ALL_COUNT"},data:i}))+"</a>"},11:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.validResults:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:""},12:function(e,t,n,r,i){return"		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["photo-list-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.validResults:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n.unless.call(o,t!=null?t.loading:t,{name:"unless",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-photos-everyone-view",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("search-photos-everyone-view",function(e){var t={"photo-models":{name:"photo-list-photo-view",params:{excludePeople:!0}},"photo-lite-models":{name:"photo-list-photo-view",params:{excludePeople:!0}}},n={jst:{rowHeight:170,subviewMapping:t},thm:{rowHeight:120,forceAspectRatio:1,subviewMapping:t},til:{rowHeight:210,forceAspectRatio:1,loadMoreMargin:5,subviewMapping:{"photo-models":{name:"photo-list-tile-view",params:{excludePeople:!0,showDescription:!1}},"photo-lite-models":{name:"photo-list-tile-view",params:{excludePeople:!0,showDescription:!1}}}},desc:{rowHeight:210,itemSpacing:{horizontal:4,vertical:70},subviewMapping:{"photo-models":{name:"photo-list-description-view"},"photo-lite-models":{name:"photo-list-description-view"}}}};e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var r,i,s,o,u;u=t.rowHeightMod||1,t.viewType==="til"&&(u=Math.max(1,t.rowHeightMod)),this.get("container").get("innerHTML")===""&&this.setContainerWithTemplate("search-photos-everyone-view",{loading:!0}),t.viewType||(t.viewType="jst"),this.unifiedSubviewParams=t.unifiedSubviewParams||{},this.unifiedSubviewParams.everyone&&this.unifiedSubviewParams.everyone.fetchParams?(this.fetchParams=this.unifiedSubviewParams.everyone.fetchParams,this.apiParams=e.merge(this.fetchParams.apiParams||{}),this.searchId=this.unifiedSubviewParams.everyone.id):(this.apiParams={},this.fetchParams={}),this.searchUrl=new e.SearchUrl(this.apiParams,this.appContext,e.SearchUrl.searchTypes.PHOTOS),r=n[t.viewType].forceAspectRatio,i=n[t.viewType].loadMoreMargin,s=e.clone(n[t.viewType].subviewMapping),o=e.clone(n[t.viewType].itemSpacing),this.apiFailed=t.apiFailed,t.photoListConfig={modelParams:{registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchId||this.searchUrl.getId(),collectionAttributeName:"photos",fetchParams:this.fetchParams},pageParams:{page:1,perPage:50,perPageDoubling:1},parentName:this.name,loadMoreMargin:3,engagementModelName:"photo-lite-models",injectPhotolistContextParams:{rapidBeaconConfig:{beaconName:"searchPhotoResultClick",itemIndexKey:"vespaRnk"}},measureAFT:!0,mobileLayout:t.allowMobileLayout?{}:null,scrollInterruptParams:{pageCounts:[5],footerToHideWhileScrolling:".footer-full-view"},layout:{containerPadding:{top:0,right:0,bottom:8,left:0},targetRowHeight:n[t.viewType].rowHeight*u,awakeBoundsToViewportSizeRatio:5}},r&&(t.photoListConfig.layout.forceAspectRatio=r),i&&(t.photoListConfig.layout.loadMoreMargin=i);if(s){t.photoListConfig.subviewMapping=s;if(this.searchUrl.getAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll)&&this.searchUrl.getAPIParam(e.SearchHelper.API.userId)||!this.appContext.flipper.isFlipped("search-exclude-people")||t.suppressExcludePeople)for(var a in s)t.photoListConfig.subviewMapping[a].params&&(t.photoListConfig.subviewMapping[a].params.excludePeople=!1)}return o&&(t.photoListConfig.layout.itemSpacing=o),this.appContext.flipper.isFlipped("global-nav-restyle")&&t.viewType===e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.justified&&(t.photoListConfig.layout.itemSpacing={horizontal:4,vertical:4}),this.rowHeightMod=t.rowHeightMod,this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return this.apiFailed}}},loadState:function(){var t=this;return this.apiFailed?e.Promise.resolve():this.appContext.getModel("search-photos-lite-models",this.searchId||this.searchUrl.getId(),this.fetchParams).then(function(n){return t.searchModel=n,e.SearchHelper.deriveScopeTitle(t.apiParams,t.appContext)}).then(function(e){t.scopeTitle=t.intlMessage(e)})},buildContainer:function(){return this.setContainerWithTemplate("search-photos-everyone-view",{validResults:this.searchModel&&this.searchModel.getValue("totalItems")>0,photoListTitle:this.scopeTitle,viewAllLink:this.searchUrl.clone().setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll,!0).getURL(),photoCount:this.apiFailed?"":this.searchModel.getValue("totalItems"),singleResult:this.apiFailed?!1:this.searchModel.getValue("totalItems")===1,"photo-list-view":this.apiFailed?"":this.subviews["photo-list-view"].get("container"),viewAll:this.apiParams[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]}),this},buildHeadContainer:function(){this.subviews["photo-list-view"]&&this.set("headContainer",this.subviews["photo-list-view"].get("headContainer"))},activate:function(){return this},onParentViewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"search:layoutChange":t[1]&&this.handleLayoutChange(t[1])}},handleLayoutChange:function(t){var r=this.subviews["photo-list-view"],i=r.photoListLayout,s=n[t].forceAspectRatio,o=n[t].loadMoreMargin,u=e.clone(n[t].subviewMapping),a=this.rowHeightMod;if(n.hasOwnProperty(t)){t==="til"&&(a=Math.max(1,a)),i.targetRowHeight=n[t].rowHeight*a,i.forceAspectRatio=s,i.loadMoreMargin=o,r.subviewMapping=u;if(!this.appContext.flipper.isFlipped("search-exclude-people"))for(var f in u)r.subviewMapping[f].params.excludePeople=!1;r.setItems(this.searchModel.getValue("photos").getList())}}})},"@VERSION@",{requires:["flickr-view","photo-list-view","flickr-promise","search-url","hermes-template-search-photos-everyone-view","search-helper","flutil","search-photos-lite-models","person-preferences-models"],langBundles:["search"]});
YUI.add("hermes-template-feedback-widget",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return' data-track="'+e.escapeExpression((s=(s=n.trackingSlk||(t!=null?t.trackingSlk:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"trackingSlk",hash:{},data:i}):s))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<a href="'+f((o=(o=n.feedbackUrl||(t!=null?t.feedbackUrl:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"feedbackUrl",hash:{},data:i}):o))+'" class="feedback-link"'+((s=n["if"].call(u,t!=null?t.trackingSlk:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'><i class="feedback-icon">&nbsp;</i>'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"feedback.FEEDBACK_LINK"},data:i}))+"</a>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/feedback-widget",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("feedback-widget-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.set("feedbackUrl",e.feedbackUrl),this.set("trackingSlk",e.trackingSlk),this.set("hidden",e.hidden||!1)},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("feedback-widget",{feedbackUrl:this.get("feedbackUrl"),trackingSlk:this.get("trackingSlk")}),this.get("hidden")&&this.get("container").addClass("hidden"),this},activate:function(){var t=e.one(".footer-full-view"),n=t?t.one("footer.foot"):null;return this.set("footerContainer",t),this.set("footer",n),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updateWidgetPosition.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updateWidgetPosition.bind(this))),this.updateWidgetPosition(),this},onParentViewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"footerDisplayChanged":this.updateWidgetPosition();break;case"unhideFeedbackWidget":this.get("container").removeClass("hidden")}},updateWidgetPosition:function(t){var n;this.get("footer")&&(n=e.config.win.pageYOffset+this.appContext.viewportData.getHeight(),this.get("footerContainer").getComputedStyle("display")!=="none"&&n>=this.get("footer").getY()?this.get("container").hasClass("hugging-footer")||this.get("container").addClass("hugging-footer"):this.get("container").hasClass("hugging-footer")&&this.get("container").removeClass("hugging-footer"))}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-feedback-widget"],langBundles:["feedback"]});
YUI.add("hermes-lang-feedback",function(e,t){e.Intl.add("hermes/feedback","en-US",{HELP_AND_FEEDBACK:["Help &amp; Feedback"],FEEDBACK_LINK:["Feedback"],FAQS_LINK:["FAQs"],OPT_OUT_LINK:["Opt out of the new Photo Experience"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-page-script-darla-beacon",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<script type="text/javascript">\n!function(t,e){var r="'+e.escapeExpression(e.lambda((s=(s=i&&i.root)&&s.selectedLang)&&s.code,t))+'";"de-DE"===r&&setTimeout(function(){var t=e.createElement("script");t.setAttribute("defer","true"),t.setAttribute("async","true"),t.setAttribute("src","https://fc.yahoo.com/sdarla/php/client.php?f=2022219890&l=RS&npv=1&ref=https%3A//flickr.com&rtype=boot"),e.getElementsByTagName("head")[0].appendChild(t)},100)}(window,document);\n</script>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/page-script-darla-beacon",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-analytics-beacon",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"<script type=\"text/javascript\">\n	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n	ga('create', 'UA-70389125-2', 'auto');\n	ga('send', 'pageview');\n</script>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"enable-analytics",{name:"isFlipped",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/analytics-beacon",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-footer-full",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="foot-mobile-banner">\n	<a class="server-only-link" href="'+a((s=(s=n.pageUrl||(t!=null?t.pageUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"pageUrl",hash:{},data:i}):s))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRY_MDOT"},data:i}))+"</a>\n</div>\n"},3:function(e,t,n,r,i){var s,o=t!=null?t:{};return'		<div class="foot-top-row">\n			<ul class="foot-nav-ul">\n\n'+((s=n["if"].call(o,t!=null?t.hasNoOptOut:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_about:s,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_jobs:s,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_blog:s,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_mobile:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_developers:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_guidelines:s,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_privacy:s,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_terms:s,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_yahoo_safely:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_feedback:s,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_report_abuse:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_help_forum:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_language:s,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))!=null?s:"")+"			</ul>\n		</div>\n"},4:function(e,t,n,r,i){var s;return'				<li class="foot-li">\n					<a class="opt-out-www server-only-link" href="'+e.escapeExpression((s=(s=n.pageUrl||(t!=null?t.pageUrl:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"pageUrl",hash:{},data:i}):s))+'">flickr.com</a>\n				</li>\n'},6:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/about" data-track="footer-about">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+"</a></li>\n"},8:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/jobs" data-track="footer-jobs">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.JOBS"},data:i}))+"</a></li>\n"},10:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//blog.flickr.net/en" data-track="footer-blog">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.BLOG"},data:i}))+"</a></li>\n"},12:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//mobile.yahoo.com/flickr" data-track="footer-mobile">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.MOBILE"},data:i}))+"</a></li>\n"},14:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/services/developer" data-track="footer-developers">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:i}))+"</a></li>\n"},16:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/help/guidelines" data-track="footer-guidelines">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:i}))+"</a></li>\n"},18:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//info.yahoo.com/privacy/us/yahoo/flickr/details.html" data-track="footer-privacy">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:i}))+"</a></li>\n"},20:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/help/terms" data-track="footer-terms">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.TERMS"},data:i}))+"</a></li>\n"},22:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//safely.yahoo.com" data-track="footer-safely">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.YAHOO_SAFELY"},data:i}))+"</a></li>\n"},24:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//yahoo.uservoice.com/forums/211185-us-flickr" data-track="footer-feedback">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.FEEDBACK"},data:i}))+"</a></li>\n"},26:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/abuse" data-track="footer-abuse">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.REPORT_ABUSE"
},data:i}))+"</a></li>\n"},28:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/help/forum" data-track="footer-forum">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:i}))+"</a></li>\n"},30:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'				<li class="foot-li lang-switcher">\n					<a href="/change_language.gne?lang='+u(o((s=t!=null?t.selectedLang:t)!=null?s.code:s,t))+"&csrf="+u(o((s=t!=null?t.selectedLang:t)!=null?s.csrf:s,t))+'" data-track="footer-language">'+u(o((s=t!=null?t.selectedLang:t)!=null?s.name:s,t))+'</a>\n					<span class="arrow"></span>\n				</li>\n'},32:function(e,t,n,r,i){var s,o=t!=null?t:{};return'		<div class="foot-bottom-row">\n			<div class="foot-yahoo">\n				<ul class="foot-nav-ul">\n'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_privacy:s,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_terms:s,{name:"if",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_yahoo_safely:s,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_help:s,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</ul>\n			</div>\n\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_yahoo_company:s,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n			<div class="foot-social">\n				<ul class="foot-nav-ul">\n'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_tumblr:s,{name:"if",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_facebook:s,{name:"if",hash:{},fn:e.program(45,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_twitter:s,{name:"if",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</ul>\n			</div>\n		</div>\n"},33:function(e,t,n,r,i){return'					<li class="foot-li"><a href="//info.yahoo.com/privacy/us/yahoo/flickr/details.html" data-track="footer-privacy">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:i}))+"</a></li>\n"},35:function(e,t,n,r,i){return'					<li class="foot-li"><a href="/help/terms" data-track="footer-terms">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.TERMS"},data:i}))+"</a></li>\n"},37:function(e,t,n,r,i){return'					<li class="foot-li"><a href="//safely.yahoo.com" data-track="footer-safely">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.YAHOO_SAFELY"},data:i}))+"</a></li>\n"},39:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<li class="foot-li"><a href="//help.yahoo.com/kb/index?page=product&locale='+a((s=(s=n.helpLocaleKey||(t!=null?t.helpLocaleKey:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"helpLocaleKey",hash:{},data:i}):s))+'&y=PROD_FLICKR_DESK&actp=productlink" data-track="footer-help">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:i}))+"</a></li>\n"},41:function(e,t,n,r,i){return'			<div class="foot-company">\n				'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"common.A_YAHOO_COMPANY_WITH_LINK"},data:i}))+"\n			</div>\n"},43:function(e,t,n,r,i){return'					<li><a target="_blank" href="http://flickr.tumblr.com/" aria-label="Tumblr" data-track="footer-tumblr">\n						<svg class="ft-icon ft-tumblr"><use xlink:href="#icon-tumblr"></use></svg>\n					</a></li>\n'},45:function(e,t,n,r,i){return'					<li><a target="_blank" href="https://www.facebook.com/flickr" aria-label="Facebook" data-track="footer-facebook">\n						<svg class="ft-icon ft-facebook"><use xlink:href="#icon-facebook"></use></svg>\n					</a></li>\n'},47:function(e,t,n,r,i){return'					<li><a target="_blank" href="https://twitter.com/flickr" aria-label="Twitter" data-track="footer-twitter">\n						<svg class="ft-icon ft-twitter"><use xlink:href="#icon-twitter"></use></svg>\n					</a></li>\n'},49:function(e,t,n,r,i){var s;return'<span id="tgt"><div id="tgtRS"></div></span>\n'+((s=e.invokePartial(r["page-script-darla-beacon"],t,{name:"page-script-darla-beacon",data:i,helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.isOptedOutOfMobile:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'<footer class="foot">\n	<div class="foot-container" role="contentinfo">\n'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_row:s,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_row:s,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n</div>\n\n"+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(o,"enable-darla-beacon",{name:"isFlipped",hash:{},fn:e.program(49,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=e.invokePartial(r["analytics-beacon"],t,{name:"analytics-beacon",data:i,helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")},usePartial:!0,useData:!0}),r={};e.Array.each(["page-script-darla-beacon","analytics-beacon"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/footer-full",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-page-script-darla-beacon"
,"hermes-template-analytics-beacon"]});
YUI.add("footer-full-view",function(e){var t=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Espa\u00f1ol","fr-FR":"Fran\u00e7ais","ko-KR":"\ud55c\uae00","it-IT":"Italiano","pt-BR":"Portugu\u00eas","vn-VN":"Ti\u1ebfng Vi\u1ec7t","id-ID":"Bahasa Indonesia","zh-HK":"\u7e41\u9ad4\u4e2d\u6587"};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=e,this.set("hideOptOutBanner",e.hideOptOutBanner),this.set("showOptOutBanner",e.showOptOutBanner),this.set("hideMobileBanner",e.hideMobileBanner),this},subviewConfig:{},loadState:function(){var r,i,s;s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],this.lang==="zh-Hant-HK"&&(this.lang="zh-HK"),this.lang.toLowerCase()==="vi-vn"&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s};for(r=0,i=t.length;r<i;r++){if(t[r]===this.lang)continue;typeof t[r]=="string"&&this.menuLangs.push({code:t[r].toLowerCase(),name:n[t[r]],csrf:s})}return e.Promise.resolve()},buildContainer:function(){var t={},n={};return this.get("viewer")&&(t=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),n={displayLangs:this.displayLangs,selectedLang:this.selectedLang,helpLocaleKey:this.selectedLang.code.replace("-","_")||"en_US",menuLangs:this.menuLangs,elements:this.setElementStates()},n.elements.bottom_row||this.get("container").addClass("compact"),YUI.Env.isServer?n.pageUrl=this.appContext.request.url:n.pageUrl=window.location.pathname,this.appContext.getCookie("mobile_allow_www")&&!this.appStateParams.hideMobileBanner?n.isOptedOutOfMobile=!this.get("hideMobileBanner"):!this.appContext.getCookie("mobile_allow_www")&&this.get("hideMobileBanner")&&(n.hasNoOptOut=!0),this.setContainerWithTemplate("footer-full",n),this},activate:function(){var t=this.get("container"),n=t.one(".lang-switcher"),r=n.one("a"),i=t.one(".foot-mobile-banner a"),s=t.one(".opt-out-www");return this.menuLangsFormatted=this.menuLangs.map(function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}),this.registerEventHandler(n.on("click",function(t){t.preventDefault(),r.addClass("dimmed");var i=new e.Views.FluidDroparound({anchorOffsetHorizontal:15,appContext:this.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:["lang-droparound"],menuItems:this.menuLangsFormatted});i.show(),this.registerEventHandler(i.on("closeDroparound",function(e){r.removeClass("dimmed")}),this)},this)),i&&this.registerEventHandler(i.on("click",function(e){this.appContext.removeCookie({cookieName:"mobile_allow_www",path:"/"})},this)),s&&this.registerEventHandler(s.on("click",function(e){this.appContext.setCookie({cookieName:"mobile_allow_www",path:"/",cookieValue:1})},this)),this},setElementStates:function(){var e={top_row:!0,top_about:!0,top_jobs:!0,top_blog:!0,top_mobile:!0,top_developers:!0,top_guidelines:!0,top_privacy:!1,top_terms:!1,top_yahoo_safely:!1,top_feedback:!0,top_report_abuse:!0,top_help_forum:!0,top_language:!0,bottom_row:!0,bottom_privacy:!0,bottom_terms:!0,bottom_yahoo_safely:!0,bottom_help:!0,bottom_yahoo_company:!0,bottom_tumblr:!0,bottom_facebook:!0,bottom_twitter:!0};return this.appContext.flipper.getValue("sohp-no-scroll-variation")!=="default"&&this.appStateParams.isSOHP&&(e.top_privacy=!0,e.top_terms=!0,e.top_yahoo_safely=!0,e.top_feedback=!1,e.top_report_abuse=!1,e.bottom_row=!1),e}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","dropdown","fluid-droparound-view"],langBundles:["common"]});
YUI.add("search-photos-unified-page-view",function(e){var t=e.url("/help/forum/en-us/72157651248603362/lastpage#reply"),n="search-photos-feedback",r=244,i=34;e.namespace("Views")[this.name]=e.Base.create("search-photos-unified-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n,i;return this.appContext.flipper.isFlipped("enable-slender-advanced-search")&&(r=100),this.unifiedSubviewParams=t.unifiedSubviewParams||{},n=this.unifiedSubviewParams.everyone&&this.unifiedSubviewParams.everyone.fetchParams?this.unifiedSubviewParams.everyone.fetchParams.apiParams:{},this.searchUrl=new e.SearchUrl(n,this.appContext,e.SearchUrl.searchTypes.PHOTOS),this.apiParams=this.searchUrl.getAPIParams(),this.advancedPanelOpen=t.openAdvanced||!1,this.searchTerm=t.searchTerm,this.apiFailed=t.apiFailed,i=this.name.replace(/-/g,"_"),YUI.Env.isServer&&e.config.flickr.paft_metrics_samples&&e.config.flickr.paft_metrics_samples[i]&&(t.paft=!0),YUI.Env.isServer||this.appContext.clientMetrics.setPendingMeasurement(this.name,!0),t.sortMenuItems=this.buildSortMenuItems(this.apiParams,!this.appContext.flipper.isFlipped("enable-slender-advanced-search")),this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,isSearchResults:!0},"search-subnav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,selectedTabKey:"photos"},"search-subnav-slender-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"search-empty-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-photos-yours-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.yours}},"search-photos-contacts-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.contacts}},"search-photos-albums-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.albums}},"search-slender-advanced-panel-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"search-photos-everyone-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.everyone}},"feedback-widget-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,feedbackUrl:t,trackingSlk:n,hidden:!0},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,pageType:"search",disabled:function(e){return e.isMobile||!this.appContext.flipper.isFlipped("enable-mini-sign-up-footer")||this.appContext.getViewer().signedIn||this.appContext.lang!=="en-US"}},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var t=this,n={};return this.apiFailed||!this.unifiedSubviewParams?e.Promise.resolve():(this.unifiedSubviewParams.everyone&&(n.everyone=this.appContext.getModel("search-photos-lite-models",this.unifiedSubviewParams.everyone.id,this.unifiedSubviewParams.everyone.fetchParams)),this.unifiedSubviewParams.yours&&(n.yours=this.appContext.getModel("search-photos-lite-models",this.unifiedSubviewParams.yours.id,this.unifiedSubviewParams.yours.fetchParams)),this.unifiedSubviewParams.contacts&&(n.contacts=this.appContext.getModel("search-photos-lite-models",this.unifiedSubviewParams.contacts.id,this.unifiedSubviewParams.contacts.fetchParams)),this.unifiedSubviewParams.albums&&(n.albums=this.appContext.getModel("search-sets-models",this.unifiedSubviewParams.albums.id,this.unifiedSubviewParams.albums.fetchParams)),e.FlickrPromise(n).then(function(e){t.subviewVisibility=t.determineSubviewVisibility(e),t.subviewVisibility.empty&&(e.everyone&&!e.everyone.getValue("emptyQuery")||e.albums&&!e.albums.getValue("emptyQuery"))&&(t.subviews["search-empty-view"].set("noMatchesForQuery",t.buildNoMatchesFoundMessage()),t.subviews["search-empty-view"].fire("parentViewEvent","error-msg-updated")),YUI.Env.isServer||t.beaconIfAllAFTResultsComplete("atfVisible")}))},buildContainer:function(){var t,n=this.appContext.flipper.isFlipped("enable-slender-advanced-search");return n&&(this.advancedPanelVisible=this.subviews["search-slender-advanced-panel-view"].getStoredAdvancedOptionsState()||this.advancedPanelOpen),t={"search-subnav-view":n?this.subviews["search-subnav-slender-view"].get("container"):this.subviews["search-subnav-view"].get("container"),useSlenderAdvancedPanel:this.appContext.flipper.isFlipped("enable-slender-advanced-search"),showEmpty:!this.subviewVisibility||this.subviewVisibility.empty,showAlbums:this.subviewVisibility&&this.subviewVisibility.albums,showEveryones:this.subviewVisibility&&this.subviewVisibility.everyone,showContacts:this.subviewVisibility&&this.subviewVisibility.contacts,showYours:this.subviewVisibility&&this.subviewVisibility.yours,viewingAll:this.searchUrl.getAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),advancedPanelVisible:this.advancedPanelVisible,globalNavRestyleFlipped:this.appContext.flipper.isFlipped("global-nav-restyle")},["search-empty-view","search-photos-yours-view","search-photos-albums-view","search-photos-contacts-view","search-photos-everyone-view"].forEach(function(e){this.subviews[e]&&(t[e]=this.subviews[e].get("container"))}.bind(this)),this.setContainerWithTemplate("search-photos-unified-page-view",t),this},buildHeadContainer:function(){var e="",t=this;["search-photos-yours-view","search-photos-albums-view","search-photos-contacts-view","search-photos-everyone-view"].forEach(function(n){t.subviews[n]&&(e+=t.subviews[n].get("headContainer"))}),this.set("headContainer",e)},activate:function(){return this.fire("parentViewEvent","unhideFeedbackWidget"),e.later(100,this,function(){e.use("photo-page-scrappy-view")}),this},determineSubviewVisibility:function(e){var t={everyone:!!e.everyone&&!!e.everyone.getValue("totalItems"),yours:!!e.yours&&!!e.yours.getValue("totalItems"),contacts:!!e.contacts&&!!e.contacts.getValue("totalItems"),albums:!!e.albums&&!!e.albums.getValue("totalItems")};return t.empty=!t.everyone&&!t.yours&&!t.contacts&&!
t.albums,t},buildSortMenuItems:function(t,n){var r=(new e.SearchUrl(t,this.appContext)).setSearchType(e.SearchUrl.searchTypes.PHOTOS),i;return i=[{text:this.intlMessage({intlName:"search.RELEVANT"}),value:e.SearchHelper.API_SORT_OPTIONS.relevant,href:n?r.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.relevant).getURL():null,isDefault:!0},{text:this.intlMessage({intlName:"search.DATE_UPLOADED"}),value:e.SearchHelper.API_SORT_OPTIONS.dateUploaded,href:n?r.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.dateUploaded).getURL():null},{text:this.intlMessage({intlName:"search.DATE_TAKEN"}),value:e.SearchHelper.API_SORT_OPTIONS.dateTaken,href:n?r.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.dateTaken).getURL():null},{text:this.intlMessage({intlName:"search.INTERESTING"}),value:e.SearchHelper.API_SORT_OPTIONS.interesting,href:n?r.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.interesting).getURL():null}],i},buildNoMatchesFoundMessage:function(){var t,n,r=this.appContext.getViewer();return this.apiParams.user_id?r.signedIn&&this.apiParams.user_id===r.nsid?this.searchTerm?n="search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR":n="search.NO_MATCHES_FOR_QUERY_TERM_YOUR":this.searchTerm?n="search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER":n="search.NO_MATCHES_FOR_QUERY_TERM_USER":this.apiParams.contacts?this.searchTerm?n="search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS":n="search.NO_MATCHES_FOR_QUERY_TERM_CONTACTS":this.apiParams.group_id?this.searchTerm?n="search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP":n="search.NO_MATCHES_FOR_QUERY_TERM_GROUP":this.searchTerm?n="search.NO_MATCHES_FOR_QUERY_TERM":n="search.NO_MATCHES_FOR_QUERY",this.searchTerm?t=this.intlMessage({intlName:n,searchTerm:e.flutil.unescape(this.searchTerm)}):t=this.intlMessage({intlName:n}),{noMatchesText:t}},onSubviewEvent:function(e,t){if(!t)return;var n=t[0];switch(n){case"dirty":case"search:dirty":this.get("container").addClass("dirty");break;case"atfVisible":this.handleAFTResult(e,t);break;case"bigScotch":this.bigScotch(t);break;case"footerDisplayChanged":this.fire("parentViewEvent","footerDisplayChanged");break;case"search:layoutChange":typeof t[1]!="undefined"&&this.fire("parentViewEvent","search:layoutChange",t[1]);break;case"search:startAdvancedPanelTransition":typeof t[1]!="undefined"&&this.handleAdvancedPanelTransitionStart(t[1]);break;case"search:finishAdvancedPanelTransition":typeof t[1]!="undefined"&&this.handleAdvancedPanelTransitionEnd(t[1]);break;default:t[2]&&t[2]==="toggle-advanced"&&this.toggleAdvancedSearch()}},handleAdvancedPanelTransitionStart:function(t){var n=this.get("container").one("main"),s;t?(s=!this.showEmpty&&e.config.win.pageYOffset>i,s||(n.addClass("advanced-panel-transition"),n.addClass("advanced-panel-visible"),e.flutil.onTransitionEnd(n,function(){n.removeClass("advanced-panel-transition")})),this.advancedPanelVisible=!0):(s=!this.showEmpty&&e.config.win.pageYOffset>r,s||(n.addClass("advanced-panel-transition"),n.removeClass("advanced-panel-visible"),e.flutil.onTransitionEnd(n,function(){n.removeClass("advanced-panel-transition")})),this.advancedPanelVisible=!1)},handleAdvancedPanelTransitionEnd:function(t){var n=this.get("container").one("main"),s,o;t?(s=!this.showEmpty&&e.config.win.pageYOffset>i,s&&(n.addClass("advanced-panel-visible"),window.scrollBy(0,r))):(s=!this.showEmpty&&e.config.win.pageYOffset>r,s&&(o=Math.min(r,e.config.win.document.body.scrollHeight-e.config.win.innerHeight-e.config.win.pageYOffset),n.removeClass("advanced-panel-visible"),window.scrollBy(0,-o)))},toggleAdvancedSearch:function(){this.advancedPanelVisible?this.closeAdvancedPanel():this.openAdvancedPanel()},openAdvancedPanel:function(){var t=this.get("container").one(".advanced-search-wrapper"),n=this.get("container").one("main"),s;s=!this.showEmpty&&e.config.win.pageYOffset>i,s?(n.addClass("advanced-panel-opening"),t.removeClass("collapsed"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","open-advanced"),this.advancedPanelVisible=!0,e.flutil.onTransitionEnd(t,function(){n.removeClass("advanced-panel-opening"),n.addClass("advanced-panel-visible"),window.scrollBy(0,r)})):(t.removeClass("collapsed"),n.addClass("advanced-panel-visible"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","open-advanced"),this.advancedPanelVisible=!0)},closeAdvancedPanel:function(){var t=this.get("container").one(".advanced-search-wrapper"),n=this.get("container").one("main"),i,s;i=!this.showEmpty&&e.config.win.pageYOffset>r,i?(n.addClass("advanced-panel-collapsing"),t.addClass("collapsed"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","collapse-advanced"),this.advancedPanelVisible=!1,s=Math.min(r,e.config.win.document.body.scrollHeight-e.config.win.innerHeight-e.config.win.pageYOffset),e.flutil.onTransitionEnd(t,function(){n.removeClass("advanced-panel-collapsing"),n.removeClass("advanced-panel-visible"),window.scrollBy(0,-s)})):(t.addClass("collapsed"),n.removeClass("advanced-panel-visible"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","collapse-advanced"),this.advancedPanelVisible=!1)},handleAFTResult:function(e,t){var n=t[0];this.paftResults||(this.paftResults={},this.showYours&&this.subviews["search-photos-yours-view"]&&(this.paftResults["search-photos-yours-view"]={}),this.showContacts&&this.subviews["search-photos-contacts-view"]&&(this.paftResults["search-photos-contacts-view"]={}),this.showEveryones&&this.subviews["search-photos-everyone-view"]&&(this.paftResults["search-photos-everyone-view"]={})),this.paftResults[e]&&(this.paftResults[e][n]=t[1]||(new Date).getTime()),this.beaconIfAllAFTResultsComplete(n)},beaconIfAllAFTResultsComplete:function(t){var n=0,r;if(this.allResultsReceived)return;if(!this.paftResults||typeof this.paftResults!="object")return;this.showAlbums||delete this.paftResults["search-photos-albums-view"],this.showYours||delete this.paftResults["search-photos-yours-view"],this.showContacts||delete this
.paftResults["search-photos-contacts-view"],this.showEveryones||delete this.paftResults["search-photos-everyone-view"],this.allResultsReceived=Object.keys(this.paftResults).every(function(e){return r=this.paftResults[e][t],typeof r=="undefined"?!1:(r>n&&(n=r),!0)}.bind(this)),this.allResultsReceived&&t==="atfVisible"&&(this.appContext.hasClientSideRouted()?(this.appContext.clientMetrics.mark("AFT_CL",n),this.appContext.clientMetrics.mark("AFT",n)):(e.config.win.performance&&e.config.win.performance.timing&&(n-=e.config.win.performance.timing.navigationStart),this.appContext.clientMetrics.record("AFT_SV",n),this.appContext.clientMetrics.record("AFT",n)),this.appContext.clientMetrics.setPendingMeasurement(this.name,!1),this.appContext.clientMetrics.beacon())},bigScotch:function(t){var n=t&&t[1],r=this.searchUrl.getAPIParam(e.SearchHelper.API.excludeUserId)||"";if(!n)return;r&&(r+=","),r+=n,this.searchUrl.setAPIParam(e.SearchHelper.API.excludeUserId,r),this.appContext.flapp.navigate(this.searchUrl.getURL())}},{ATTRS:{spaceid:{value:792600534}}})},"@VERSION@",{requires:["url","flutil","flickr-view","flickr-promise","search-helper","hermes-template-search-photos-unified-page-view","search-subnav-view","search-subnav-slender-view","search-empty-view","search-photos-albums-view","search-photos-yours-view","search-photos-contacts-view","search-slender-advanced-panel-view","search-photos-everyone-view","search-url","feedback-widget-view","footer-full-view","querystring-stringify-simple","search-photos-lite-models"],langBundles:["search"]});
YUI.add("hermes-lang-client-app",function(e,t){e.Intl.add("hermes/client-app","en-US",{SAVING_LAST_ACTIONS:["Hey! We\u2019re still saving your last actions, you might lose them if you leave this page."],UPLOAD_IN_PROGRESS:["Wait! Your photos are still on the way to our servers. They might not get there if you leave this page before they arrive."]})},"@VERSION@",{requires:["intl"]});
